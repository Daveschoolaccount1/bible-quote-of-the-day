<div id="verse-container">
  <div id="verse-text">Loading verse...</div>
  <div id="verse-ref"></div>
  <div id="verse-time"></div>
  <button id="new-verse-btn">Get Another Verse</button>
</div>

<style>
  /* Container styling */
  #verse-container {
    display: inline-block;
    background: linear-gradient(to bottom, #fff8e1, #ffecb3);
    padding: 30px 40px;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    font-family: 'Georgia', serif;
    text-align: center;
    max-width: 600px;
    transition: background-color 0.4s ease;
  }

  /* Verse text */
  #verse-text {
    font-size: 1.4em;
    font-style: italic;
    margin-bottom: 15px;
    line-height: 1.6;
    color: #4e342e;
  }

  /* Reference */
  #verse-ref {
    font-weight: bold;
    margin-bottom: 8px;
    color: #3e2723;
  }

  /* Timestamp */
  #verse-time {
    font-size: 0.85em;
    color: #6d4c41;
    margin-bottom: 15px;
  }

  /* Button */
  #new-verse-btn {
    background-color: #fbc02d;
    border: none;
    padding: 10px 20px;
    font-size: 1em;
    border-radius: 8px;
    cursor: pointer;
    color: #3e2723;
    font-weight: bold;
    transition: background-color 0.3s ease;
  }
  #new-verse-btn:hover {
    background-color: #f9a825;
  }
</style>

<script>
  async function fetchVerse() {
    try {
      const response = await fetch("https://labs.bible.org/api/?passage=random&type=json");
      const data = await response.json();

      // Filter out boring sections
      const excluded = ["genealogy", "temple", "measurements", "king"];
      const verseText = data[0].text;
      const bookName = data[0].bookname;
      const chapter = data[0].chapter;
      const verseNum = data[0].verse;

      if (excluded.some(term => verseText.toLowerCase().includes(term))) {
        return fetchVerse(); // get another verse
      }

      document.getElementById("verse-text").textContent = `"${verseText}"`;
      document.getElementById("verse-ref").textContent = `${bookName} ${chapter}:${verseNum} (NIV)`;
      document.getElementById("verse-time").textContent = 
        "Last updated: " + new Date().toLocaleString();
    } catch (error) {
      document.getElementById("verse-text").textContent = "Error loading verse.";
    }
  }

  document.getElementById("new-verse-btn").addEventListener("click", fetchVerse);
  fetchVerse(); // Load verse immediately on page load
</script>
